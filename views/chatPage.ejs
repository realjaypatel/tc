<%- include('layouts/main-layout') %>
<% var errorMessage = errorMessage|| ''; %>
<% var lastName = lastName|| ''; %>
    <% if (errorMessage) { %>
        <span class="errorMessage"><%= errorMessage %></span>
    <% } else { %>
        <script>
            var chatId = '<%= chat._id %>';
        </script>

        <div class="chatPageContainer">
            <div class="chatTitleBarContainer">
                <!-- Assuming `createChatImage` generates images and `createChatNameModal` creates modals -->
                <% /* Replace with EJS equivalent */ %>
                <span id="chatName" data-toggle="modal" data-target="#chatNameModal"></span>
            </div>

            <div class="mainContentContainer">
                <div class="loadingSpinnerContainer">
                    <img src="/images/loadingSpinner.gif" alt="Loading spinner">
                </div>

                <div class="chatContainer" style="visibility: hidden;" data-room="<%= chat._id %>">
                    <ul class="chatMessages"></ul>

                    <div class="typingDots">
                        <img src="/images/dots.gif" alt="Typing dots">
                    </div>

                    <div class="footer">
                        <textarea class="inputTextbox" name="messageInput" placeholder="Type a message..."></textarea>
                        <button class="sendMessageButton"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Include the modal creation here -->
        <% /* Replace with EJS equivalent of createChatNameModal */ %>
    <% } %>
    <%- include('layouts/footer') %>
    <script src="/js/chatPage.js"></script>


